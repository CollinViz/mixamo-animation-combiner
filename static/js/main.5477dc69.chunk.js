(this["webpackJsonpreact-mixamo"]=this["webpackJsonpreact-mixamo"]||[]).push([[0],{15:function(e,a,t){e.exports=t(24)},23:function(e,a,t){},24:function(e,a,t){"use strict";t.r(a);var n=t(1),i=t.n(n),l=t(10),o=t.n(l),c=t(4),r=function(e){var a=e.children;return i.a.createElement("div",null,i.a.createElement("nav",{className:"black"},i.a.createElement("div",{className:"nav-wrapper "},i.a.createElement("div",{className:"brand-logo center"},"Mixamo Character Animation Combiner"),i.a.createElement("ul",{className:"right"},i.a.createElement("li",null,i.a.createElement("a",{rel:"noopener noreferrer",style:{padding:10},href:"https://github.com/nilooy/mixamo-animation-combiner",target:"_blank"},i.a.createElement("img",{src:"github.png",alt:"github logo",width:"40"})))))),a)},m=function(e){var a=e.onUpload,t=e.multiple;return i.a.createElement("div",{className:"file-field input-field "},i.a.createElement("div",{className:"btn"},i.a.createElement("span",null,"Upload File"),i.a.createElement("input",{type:"file",onChange:a,multiple:t})),i.a.createElement("div",{className:"file-path-wrapper"},i.a.createElement("input",{className:"file-path validate",type:"text"})))},d=function(e){var a=e.onMainModelUpload,t=e.onAnimationUpload;return i.a.createElement("ul",{className:"collection with-header "},i.a.createElement("li",{className:"collection-header grey darken-3 white-text"},i.a.createElement("h5",null,"Upload File with Character "),i.a.createElement("p",null,"(.fbx / .gltf /.glb)"),i.a.createElement(m,{onUpload:a})),i.a.createElement("li",{className:"collection-header grey darken-3 white-text"},i.a.createElement("h5",null,"Upload Animations (.fbx)"),i.a.createElement(m,{onUpload:t,multiple:!0})))},s=t(0),u=t(11),p=t(12),f=function(e,a,t){e.aspect=a.clientWidth/a.clientHeight,e.updateProjectionMatrix(),t.setSize(a.clientWidth,a.clientHeight)},h=t(14),g=t(13),b=function(e,a,t){("fbx"===a?new h.a:new g.a).load(e,(function(e){if("fbx"===a){e.traverse((function(e){e.isMesh&&(e.castShadow=!0,e.receiveShadow=!0)}));var n=(new s.f).setFromObject(e),i=new s.Ib;n.getCenter(i),e.position.sub(i)}t(e)}))},E=t(7),v=t(3),w=function(e,a,t){var l=Object(n.createContext)();return{Context:l,Provider:function(o){var r=o.children,m=Object(n.useReducer)(e,t),d=Object(c.a)(m,2),s=d[0],u=d[1],p={};for(var f in a)p[f]=a[f](u);return i.a.createElement(l.Provider,{value:Object(v.a)({state:s},p)},r)}}}((function(e,a){switch(a.type){case"add_main_model":return Object(v.a)(Object(v.a)({},e),{},{mainModel:a.payload});case"add_animations_from_main":return Object(v.a)(Object(v.a)({},e),{},{animations:Object(E.a)(a.payload)});case"add_animations":return Object(v.a)(Object(v.a)({},e),{},{animations:[].concat(Object(E.a)(e.animations),Object(E.a)(a.payload))});case"change_animation_name":return Object(v.a)(Object(v.a)({},e),{},{animations:e.animations.map((function(e){return e.uuid===a.payload.uuid?a.payload:e}))});case"add_mixer":return Object(v.a)(Object(v.a)({},e),{},{mixer:a.payload});case"delete_animation":return Object(v.a)(Object(v.a)({},e),{},{animations:e.animations.filter((function(e){return e.uuid!==a.payload}))});case"toogle_loading":return Object(v.a)(Object(v.a)({},e),{},{loading:!e.loading});default:return e}}),{addMainModel:function(e){return function(a){e({type:"add_main_model",payload:a})}},addAnimationFromMainModel:function(e){return function(a){e({type:"add_animations_from_main",payload:a})}},addAnimations:function(e){return function(a){e({type:"add_animations",payload:a})}},changeName:function(e){return function(a){e({type:"change_animation_name",payload:a})}},addMixer:function(e){return function(a){e({type:"add_mixer",payload:a})}},deleteAnimation:function(e){return function(a){e({type:"delete_animation",payload:a})}},toggleLoading:function(e){return function(){e({type:"toogle_loading"})}}},{mainModel:null,animations:[],mixer:null,loading:!1}),y=w.Provider,j=w.Context,x=function(e){var a=e.model,t=e.fileExt,l=Object(n.useRef)(null),o=Object(n.useContext)(j),c=o.addMainModel,r=o.addAnimationFromMainModel,m=o.addMixer,d=o.toggleLoading;return Object(n.useEffect)((function(){if(a){var e=new s.k,n=l.current,i=new s.ub,o=function(e){var a=new s.ib(45,e.clientWidth/e.clientHeight,.1,1e3);return a.position.z=300,a.position.y=50,a}(n),h=null,g=new s.Mb;f(o,n,g),n.children.length&&n.removeChild(n.lastChild),n.appendChild(g.domElement);var E=new s.T(new s.jb(2e3,2e3),new s.W({color:10066329,depthWrite:!1}));E.rotation.x=-Math.PI/2,E.receiveShadow=!0,E.position.y=-80,i.add(E);var v=new s.w(2e3,20,0,0);v.material.opacity=.2,v.material.transparent=!0,v.position.y=-80,i.add(v),i.fog=new s.u(10526880,200,1e3);var w=new u.a(g);d(),b(a,t,(function(e){d(),e.animations.forEach((function(e){"Take 001"===e.name&&(e.name="T-Pose (No Animation)")})),"fbx"===t?i.add(e):i.add(e.scene),c(e),e.animations.length&&r(e.animations),h=new s.d("fbx"===t?e:e.scene),m(h),w.dispose()})),g.toneMapping=s.a,g.toneMappingExposure=1,g.outputEncoding=s.Nb,new s.hb(g).compileEquirectangularShader(),function(e,a){new p.a(e,a).update()}(o,n),function(e){var a=new s.y(16777215,4473924);a.position.set(100,200,400),e.add(a),(a=new s.n(16777215)).position.set(100,200,100),a.castShadow=!0,a.shadow.camera.top=180,a.shadow.camera.bottom=-100,a.shadow.camera.left=-120,a.shadow.camera.right=120,e.add(a)}(i),i.background=new s.l(10526880),g.shadowMap.enabled=!0,g.render(i,o),window.addEventListener("resize",(function(){return f(o,n,g)}));!function a(){requestAnimationFrame(a),h&&h.update(e.getDelta()),g.render(i,o)}()}}),[a]),i.a.createElement("div",{style:{height:"90vh"},ref:l})},O=function(){var e=Object(n.useContext)(j),a=e.state,t=a.animations,l=a.mixer,o=(a.loading,e.changeName),r=e.deleteAnimation,m=Object(n.useState)(null),d=Object(c.a)(m,2),s=d[0],u=d[1],p=Object(n.useState)(null),f=Object(c.a)(p,2),h=f[0],g=f[1],b=Object(n.useState)(null),E=Object(c.a)(b,2),v=E[0],w=E[1],y=Object(n.useState)(""),x=Object(c.a)(y,2),O=x[0],N=x[1];Object(n.useEffect)((function(){h&&h.play()}),[h]),Object(n.useEffect)((function(){}),[]);var C=function(e){O.length&&(e.name=O,o(e)),w(null)};return i.a.createElement("ul",{className:"collection with-header"},i.a.createElement("li",{className:"collection-header active grey darken-3 white-text"},i.a.createElement("h5",null,"Animations (",t.length,")"),i.a.createElement("p",null,"Double Click to rename | Click to play")),i.a.createElement("div",{style:{height:"75vh",overflow:"auto"}},t.map((function(e){return e.uuid===v?i.a.createElement("input",{name:"rename",style:{paddingLeft:10,color:"#fff"},key:e.uuid,type:"text",placeholder:"Rename",onChange:function(e){return N(e.target.value)},onKeyDown:function(a){return"Enter"===a.key?C(e):null},onBlur:function(a){return C(e)},defaultValue:e.name,autoFocus:!0}):i.a.createElement("li",{key:e.uuid,className:"collection-item grey darken-2 white-text animation-item row",onClick:function(){return a=e,h&&h.stop(),g(l.clipAction(a)),void u(a.uuid);var a},onDoubleClick:function(){return w(e.uuid)},style:{color:e.uuid===s?"#576ff6":""}},e.uuid===s&&i.a.createElement("span",{className:"left material-icons"},"play_arrow"),i.a.createElement("span",{className:"col"},e.name),i.a.createElement("span",{className:"col left material-icons right red-text",onClick:function(){return a=e.uuid,void r(a);var a}},"delete"))}))))},N=t(8),C=function(){var e=Object(n.useContext)(j),a=e.state,t=a.mainModel,l=a.animations,o=e.toggleLoading,c=function(e,a){var t=document.createElement("a");t.style.display="none",document.body.appendChild(t),t.href=URL.createObjectURL(e),t.download=a,t.click(),o()};return i.a.createElement("div",{style:{height:100}},i.a.createElement("h4",{className:"white-text"},"Export"),i.a.createElement("div",{className:"row"},i.a.createElement("button",{style:{margin:"0 auto"},className:"waves-effect waves-light btn-large indigo accent-4 col m12 l6",onClick:function(){o(),(new N.a).parse(t,(function(e){var a,t,n=JSON.stringify(e,null,2);a=n,t="mixamo-".concat((new Date).getTime(),".gltf"),c(new Blob([a],{type:"text/plain"}),t)}),{trs:!0,binary:!1,animations:l})}},"Export GLTF"),i.a.createElement("button",{style:{margin:"0 auto"},className:"waves-effect waves-light btn-large indigo accent-4 col m12 l6",onClick:function(){o(),(new N.a).parse(t,(function(e){var a,t;a=e,t="mixamo-".concat((new Date).getTime(),".glb"),c(new Blob([a],{type:"application/octet-stream"}),t)}),{trs:!0,binary:!0,animations:l})}},"Export GLB")))},M=function(e){return e.loading&&i.a.createElement("div",{className:"preloader-box"},i.a.createElement("div",{className:"preloader-wrapper big active"},i.a.createElement("div",{className:"spinner-layer spinner-blue-only"},i.a.createElement("div",{className:"circle-clipper left"},i.a.createElement("div",{className:"circle"})),i.a.createElement("div",{className:"gap-patch"},i.a.createElement("div",{className:"circle"})),i.a.createElement("div",{className:"circle-clipper right"},i.a.createElement("div",{className:"circle"})))))},_=function(){var e=Object(n.useState)("mixamo-animation-combiner/default.gltf"),a=Object(c.a)(e,2),t=a[0],l=a[1],o=Object(n.useState)("gltf"),m=Object(c.a)(o,2),s=m[0],u=m[1],p=Object(n.useContext)(j),f=p.state.loading,h=p.addAnimations;return i.a.createElement(r,null,i.a.createElement("div",{className:"row",style:{height:"91vh"}},i.a.createElement("div",{className:"col m3"},i.a.createElement(d,{onMainModelUpload:function(e){if(e.target.files[0]){var a=e.target.files[0],t=URL.createObjectURL(a);u(a.name.split(".").pop()),console.log(t),l(t)}},onAnimationUpload:function(e){e.target.files.length&&Array.from(e.target.files).forEach((function(e){var a=URL.createObjectURL(e),t=e.name.split(".").pop();b(a,t,(function(a){var t=e.name.split(".")[0].replace(/\s/g,"");t=t.charAt(0).toUpperCase()+t.slice(1),a.animations.length>1?a.animations.forEach((function(e,a){e.name=t+a})):"Take 001"===a.animations[0].name?a.animations[0].name="T-Pose (No Animation)":a.animations[0].name=t,h(a.animations)}))}))}}),i.a.createElement(C,null)),i.a.createElement("div",{className:"col m6"},i.a.createElement(x,{model:t,fileExt:s})),i.a.createElement("div",{className:"col m3"},i.a.createElement(O,null))),i.a.createElement(M,{loading:f}))},k=function(){return i.a.createElement(y,null,i.a.createElement(_,null))};t(20),t(21),t(23);o.a.render(i.a.createElement(k,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.5477dc69.chunk.js.map