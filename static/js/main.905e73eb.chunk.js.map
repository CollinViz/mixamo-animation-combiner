{"version":3,"sources":["components/Layout.js","components/UploadButton.js","components/UploadSection.js","helpers/resizeWindow.js","helpers/loadModel.js","context/createDataContext.js","context/ModelContext.js","components/ModelViewer.js","helpers/setCamera.js","helpers/setControls.js","helpers/setLights.js","components/AnimationList.js","components/Export.js","components/Preloader.js","pages/Home.js","App.js","index.js"],"names":["Layout","children","className","rel","style","padding","href","target","src","alt","width","UploadButton","onUpload","multiple","type","onChange","UploadSection","onMainModelUpload","onAnimationUpload","camera","container","renderer","aspect","clientWidth","clientHeight","updateProjectionMatrix","setSize","path","callback","FBXLoader","GLTFLoader","load","object","traverse","child","isMesh","castShadow","receiveShadow","box","Box3","setFromObject","center","Vector3","getCenter","position","sub","reducer","actions","defaultValue","Context","createContext","Provider","useReducer","state","dispatch","boundActions","key","value","createDataContext","action","mainModel","payload","animations","map","anim","uuid","mixer","filter","animation","loading","addMainModel","addAnimationFromMainModel","addAnimations","changeName","addMixer","deleteAnimation","animationId","toggleLoading","ModelViewer","model","fileExt","viewer","useRef","useContext","ModalContext","useEffect","clock","THREE","current","scene","PerspectiveCamera","z","y","setCamera","resizeWindow","length","removeChild","lastChild","appendChild","domElement","mesh","color","depthWrite","rotation","x","Math","PI","add","grid","material","opacity","transparent","fog","roughnessMipmapper","RoughnessMipmapper","loadModel","forEach","name","dispose","toneMapping","toneMappingExposure","outputEncoding","compileEquirectangularShader","OrbitControls","update","setControls","light","HemisphereLight","set","DirectionalLight","shadow","top","bottom","left","right","setLights","background","shadowMap","enabled","render","window","addEventListener","animate","requestAnimationFrame","getDelta","height","ref","AnimationList","useState","playing","setPlaying","setAction","editingId","setEditingId","setName","play","changeAnimationName","overflow","item","paddingLeft","placeholder","e","onKeyDown","onBlur","autoFocus","onClick","stop","clipAction","onDoubleClick","Export","save","blob","filename","link","document","createElement","display","body","URL","createObjectURL","download","click","margin","GLTFExporter","parse","result","text","output","JSON","stringify","Date","getTime","Blob","trs","binary","buffer","Preloader","Home","setModel","setFileExt","event","files","file","fileUrl","split","pop","console","log","Array","from","element","fileName","replace","charAt","toUpperCase","slice","index","App","ReactDOM","getElementById"],"mappings":"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","file":"static/js/main.905e73eb.chunk.js","sourcesContent":["import React from \"react\";\n\nconst Layout = ({ children }) => {\n  return (\n    <div>\n      <nav className=\"black\">\n        <div className=\"nav-wrapper \">\n          <div className=\"brand-logo center\">\n            Mixamo Character Animation Combiner\n          </div>\n          <ul className=\"right\">\n            <li>\n              <a\n                rel=\"noopener noreferrer\"\n                style={{ padding: 10 }}\n                href=\"https://github.com/nilooy/mixamo-animation-combiner\"\n                target=\"_blank\"\n              >\n                <img src=\"github.png\" alt=\"github logo\" width=\"40\" />\n              </a>\n            </li>\n          </ul>\n        </div>\n      </nav>\n\n      {children}\n    </div>\n  );\n};\n\nexport default Layout;\n","import React from \"react\";\n\nconst UploadButton = ({ onUpload, multiple }) => {\n  return (\n    <div className=\"file-field input-field \">\n      <div className=\"btn\">\n        <span>Upload File</span>\n        <input type=\"file\" onChange={onUpload} multiple={multiple} />\n      </div>\n      <div className=\"file-path-wrapper\">\n        <input className=\"file-path validate\" type=\"text\" />\n      </div>\n    </div>\n  );\n};\n\nexport default UploadButton;\n","import React from \"react\";\nimport UploadButton from \"./UploadButton\";\n\nconst UploadSection = ({ onMainModelUpload, onAnimationUpload }) => {\n  return (\n    <ul className=\"collection with-header \">\n      <li className=\"collection-header grey darken-3 white-text\">\n        <h5>Upload File with Character </h5>\n        <p>(.fbx / .gltf /.glb)</p>\n        <UploadButton onUpload={onMainModelUpload} />\n      </li>\n      <li className=\"collection-header grey darken-3 white-text\">\n        <h5>Upload Animations (.fbx)</h5>\n        <UploadButton onUpload={onAnimationUpload} multiple={true} />\n      </li>\n    </ul>\n  );\n};\n\nexport default UploadSection;\n","export default (camera, container, renderer) => {\n  camera.aspect = container.clientWidth / container.clientHeight;\n  camera.updateProjectionMatrix();\n  renderer.setSize(container.clientWidth, container.clientHeight);\n};\n","import { FBXLoader } from \"three/examples/jsm/loaders/FBXLoader.js\";\nimport { GLTFLoader } from \"three/examples/jsm/loaders/GLTFLoader\";\nimport { Box3, Vector3 } from \"three\";\n\nexport default (path, type, callback) => {\n  let loader = null;\n  if (type === \"fbx\") {\n    loader = new FBXLoader();\n  } else loader = new GLTFLoader();\n\n  loader.load(path, (object) => {\n    if (type === \"fbx\") {\n      object.traverse(function (child) {\n        if (child.isMesh) {\n          child.castShadow = true;\n          child.receiveShadow = true;\n        }\n      });\n\n      var box = new Box3().setFromObject(object);\n      var center = new Vector3();\n      box.getCenter(center);\n      object.position.sub(center); // center the model\n    }\n\n    callback(object);\n  });\n};\n","import React, { useReducer, createContext } from \"react\";\n\nexport default (reducer, actions, defaultValue) => {\n  const Context = createContext();\n\n  const Provider = ({ children }) => {\n    const [state, dispatch] = useReducer(reducer, defaultValue);\n\n    const boundActions = {};\n    for (let key in actions) {\n      boundActions[key] = actions[key](dispatch);\n    }\n\n    return (\n      <Context.Provider value={{ state, ...boundActions }}>\n        {children}\n      </Context.Provider>\n    );\n  };\n\n  return { Context, Provider };\n};\n","import createDataContext from \"./createDataContext\";\n\nconst initialState = {\n  mainModel: null,\n  animations: [],\n  mixer: null,\n  loading: false,\n};\n\nconst modelReducer = (state, action) => {\n  switch (action.type) {\n    case \"add_main_model\":\n      return { ...state, mainModel: action.payload };\n    case \"add_animations_from_main\":\n      return { ...state, animations: [...action.payload] };\n    case \"add_animations\":\n      return { ...state, animations: [...state.animations, ...action.payload] };\n    case \"change_animation_name\":\n      return {\n        ...state,\n        animations: state.animations.map((anim) =>\n          anim.uuid === action.payload.uuid ? action.payload : anim\n        ),\n      };\n    case \"add_mixer\":\n      return { ...state, mixer: action.payload };\n    case \"delete_animation\":\n      return {\n        ...state,\n        animations: state.animations.filter(\n          (animation) => animation.uuid !== action.payload\n        ),\n      };\n    case \"toogle_loading\":\n      return { ...state, loading: !state.loading };\n    default:\n      return state;\n  }\n};\n\nconst addMixer = (dispatch) => (mixer) => {\n  dispatch({ type: \"add_mixer\", payload: mixer });\n};\n\nconst addMainModel = (dispatch) => (object) => {\n  dispatch({ type: \"add_main_model\", payload: object });\n};\n\nconst addAnimationFromMainModel = (dispatch) => (animations) => {\n  dispatch({ type: \"add_animations_from_main\", payload: animations });\n};\n\nconst addAnimations = (dispatch) => (animations) => {\n  dispatch({ type: \"add_animations\", payload: animations });\n};\n\nconst changeName = (dispatch) => (animation) => {\n  dispatch({ type: \"change_animation_name\", payload: animation });\n};\n\nconst deleteAnimation = (dispatch) => (animationId) => {\n  dispatch({ type: \"delete_animation\", payload: animationId });\n};\n\nconst toggleLoading = (dispatch) => () => {\n  dispatch({ type: \"toogle_loading\" });\n};\n\nexport const { Provider, Context } = createDataContext(\n  modelReducer,\n  {\n    addMainModel,\n    addAnimationFromMainModel,\n    addAnimations,\n    changeName,\n    addMixer,\n    deleteAnimation,\n    toggleLoading,\n  },\n  initialState\n);\n","import React, { useRef, useEffect, useContext } from \"react\";\nimport * as THREE from \"three\";\nimport { RoughnessMipmapper } from \"three/examples/jsm/utils/RoughnessMipmapper\";\nimport setCamera from \"../helpers/setCamera\";\nimport setControls from \"../helpers/setControls\";\nimport setLights from \"../helpers/setLights\";\nimport resizeWindow from \"../helpers/resizeWindow\";\nimport loadModel from \"../helpers/loadModel\";\nimport { Context as ModalContext } from \"../context/ModelContext\";\n\nconst ModelViewer = ({ model, fileExt }) => {\n  const viewer = useRef(null);\n  const {\n    addMainModel,\n    addAnimationFromMainModel,\n    addMixer,\n    toggleLoading,\n  } = useContext(ModalContext);\n\n  useEffect(() => {\n    if (!model) return;\n    const clock = new THREE.Clock();\n    const { current } = viewer;\n    const scene = new THREE.Scene();\n    const camera = setCamera(current);\n    let mixer = null;\n\n    //=================================================>\n    // Init renderer\n    //=================================================>\n    const renderer = new THREE.WebGLRenderer();\n    resizeWindow(camera, current, renderer);\n    if (current.children.length) current.removeChild(current.lastChild);\n    current.appendChild(renderer.domElement);\n\n    // ground\n    var mesh = new THREE.Mesh(\n      new THREE.PlaneBufferGeometry(2000, 2000),\n      new THREE.MeshPhongMaterial({ color: 0x999999, depthWrite: false })\n    );\n    mesh.rotation.x = -Math.PI / 2;\n    mesh.receiveShadow = true;\n    mesh.position.y = -80;\n    scene.add(mesh);\n\n    var grid = new THREE.GridHelper(2000, 20, 0x000000, 0x000000);\n    grid.material.opacity = 0.2;\n    grid.material.transparent = true;\n    grid.position.y = -80;\n    scene.add(grid);\n\n    scene.fog = new THREE.Fog(0xa0a0a0, 200, 1000);\n    var roughnessMipmapper = new RoughnessMipmapper(renderer);\n    toggleLoading();\n    loadModel(model, fileExt, (object) => {\n      toggleLoading();\n      object.animations.forEach((anim) => {\n        if (anim.name === \"Take 001\") {\n          anim.name = \"T-Pose (No Animation)\";\n        }\n      });\n\n      if (fileExt === \"fbx\") scene.add(object);\n      else scene.add(object.scene);\n\n      // Add main model in reducer\n      addMainModel(object);\n      // add animation if there any\n      if (object.animations.length)\n        addAnimationFromMainModel(object.animations);\n\n      mixer = new THREE.AnimationMixer(\n        fileExt === \"fbx\" ? object : object.scene\n      );\n      addMixer(mixer);\n      roughnessMipmapper.dispose();\n    });\n\n    renderer.toneMapping = THREE.ACESFilmicToneMapping;\n    renderer.toneMappingExposure = 1;\n    renderer.outputEncoding = THREE.sRGBEncoding;\n\n    var pmremGenerator = new THREE.PMREMGenerator(renderer);\n    pmremGenerator.compileEquirectangularShader();\n\n    setControls(camera, current);\n    setLights(scene);\n    scene.background = new THREE.Color(0xa0a0a0);\n    renderer.shadowMap.enabled = true;\n    renderer.render(scene, camera);\n\n    //=================================================>\n    // Resize listener\n    //=================================================>\n\n    window.addEventListener(\"resize\", () =>\n      resizeWindow(camera, current, renderer)\n    );\n\n    //=================================================>\n    // Animate on frame update\n    //=================================================>\n    var animate = function () {\n      requestAnimationFrame(animate);\n      if (mixer) mixer.update(clock.getDelta());\n      renderer.render(scene, camera);\n    };\n    animate();\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [model]);\n\n  return <div style={{ height: \"90vh\" }} ref={viewer}></div>;\n};\n\nexport default ModelViewer;\n","import { PerspectiveCamera } from \"three\";\n\nexport default (container) => {\n  let camera = new PerspectiveCamera(\n    45,\n    container.clientWidth / container.clientHeight,\n    0.1,\n    1000\n  );\n  // camera.position.set(100, 200, 400);\n  camera.position.z = 300;\n  camera.position.y = 50;\n\n  return camera;\n};\n","import { OrbitControls } from \"three/examples/jsm/controls/OrbitControls\";\n\nexport default (camera, viewer) => {\n  let controls = new OrbitControls(camera, viewer);\n  controls.update();\n};\n","import { HemisphereLight, DirectionalLight } from \"three\";\n\nexport default (scene) => {\n  let light = new HemisphereLight(0xffffff, 0x444444);\n  light.position.set(100, 200, 400);\n  scene.add(light);\n\n  light = new DirectionalLight(0xffffff);\n  light.position.set(100, 200, 100);\n  light.castShadow = true;\n  light.shadow.camera.top = 180;\n  light.shadow.camera.bottom = -100;\n  light.shadow.camera.left = -120;\n  light.shadow.camera.right = 120;\n  scene.add(light);\n};\n","import React, { useContext, useEffect, useState } from \"react\";\nimport { Context as ModalContext } from \"../context/ModelContext\";\n\nconst AnimationList = () => {\n  const {\n    state: { animations, mixer, loading },\n    changeName,\n    deleteAnimation,\n  } = useContext(ModalContext);\n\n  const [playing, setPlaying] = useState(null);\n  const [action, setAction] = useState(null);\n\n  const [editingId, setEditingId] = useState(null);\n  const [name, setName] = useState(\"\");\n\n  useEffect(() => {\n    if (action) {\n      action.play();\n    }\n  }, [action]);\n\n  useEffect(() => {\n    // setTimeout(() => {\n    //   document.querySelectorAll(\".collection-item\")[2].click();\n    // }, 10000);\n  }, []);\n\n  const playAnimation = (animation) => {\n    if (action) action.stop();\n    setAction(mixer.clipAction(animation));\n    setPlaying(animation.uuid);\n  };\n\n  const changeAnimationName = (animation) => {\n    if (name.length) {\n      animation.name = name;\n      changeName(animation);\n    }\n    setEditingId(null);\n  };\n\n  const removeAnimation = (animationId) => {\n    // if (action && action._clip.uuid === animationId) action.stop();\n    deleteAnimation(animationId);\n  };\n\n  return (\n    <ul className=\"collection with-header\">\n      <li className=\"collection-header active grey darken-3 white-text\">\n        <h5>Animations ({animations.length})</h5>\n        <p>Double Click to rename | Click to play</p>\n      </li>\n      <div style={{ height: \"75vh\", overflow: \"auto\" }}>\n        {animations.map((item) =>\n          item.uuid === editingId ? (\n            <input\n              name=\"rename\"\n              style={{ paddingLeft: 10, color: \"#fff\" }}\n              key={item.uuid}\n              type=\"text\"\n              placeholder=\"Rename\"\n              onChange={(e) => setName(e.target.value)}\n              onKeyDown={(e) =>\n                e.key === \"Enter\" ? changeAnimationName(item) : null\n              }\n              onBlur={(e) => changeAnimationName(item)}\n              defaultValue={item.name}\n              autoFocus\n            />\n          ) : (\n            <li\n              key={item.uuid}\n              className=\"collection-item grey darken-2 white-text animation-item row\"\n              onClick={() => playAnimation(item)}\n              onDoubleClick={() => setEditingId(item.uuid)}\n              style={{\n                color: item.uuid === playing ? \"#576ff6\" : \"\",\n              }}\n            >\n              {item.uuid === playing && (\n                <span className=\"left material-icons\">play_arrow</span>\n              )}\n              <span className=\"col\">{item.name}</span>\n              <span\n                className=\"col left material-icons right red-text\"\n                onClick={() => removeAnimation(item.uuid)}\n              >\n                delete\n              </span>\n            </li>\n          )\n        )}\n      </div>\n    </ul>\n  );\n};\n\nexport default AnimationList;\n","import React, { useContext } from \"react\";\nimport { GLTFExporter } from \"three/examples/jsm/exporters/GLTFExporter\";\nimport { Context as ModalContext } from \"../context/ModelContext\";\n\nconst Export = () => {\n  const {\n    state: { mainModel, animations },\n    toggleLoading,\n  } = useContext(ModalContext);\n\n  const save = (blob, filename) => {\n    var link = document.createElement(\"a\");\n    link.style.display = \"none\";\n    document.body.appendChild(link); // Firefox workaround, see #6594\n    link.href = URL.createObjectURL(blob);\n    link.download = filename;\n    link.click();\n    toggleLoading();\n\n    // URL.revokeObjectURL( url ); breaks Firefox...\n  };\n\n  const saveString = (text, filename) => {\n    save(new Blob([text], { type: \"text/plain\" }), filename);\n  };\n\n  const saveArrayBuffer = (buffer, filename) => {\n    save(new Blob([buffer], { type: \"application/octet-stream\" }), filename);\n  };\n\n  const exportGLB = () => {\n    toggleLoading();\n    var exporter = new GLTFExporter();\n\n    // Parse the input and generate the glTF output\n    exporter.parse(\n      mainModel,\n      function (result) {\n        saveArrayBuffer(result, `mixamo-${new Date().getTime()}.glb`);\n      },\n      { trs: true, binary: true, animations: animations }\n    );\n  };\n\n  const exportGLTF = () => {\n    toggleLoading();\n    var exporter = new GLTFExporter();\n\n    // Parse the input and generate the glTF output\n    exporter.parse(\n      mainModel,\n      function (result) {\n        var output = JSON.stringify(result, null, 2);\n        saveString(output, `mixamo-${new Date().getTime()}.gltf`);\n      },\n      { trs: true, binary: false, animations: animations }\n    );\n  };\n\n  return (\n    <div style={{ height: 100 }}>\n      <h4 className=\"white-text\">Export</h4>\n\n      <div className=\"row\">\n        <button\n          style={{ margin: \"0 auto\" }}\n          className=\"waves-effect waves-light btn-large indigo accent-4 col m12 l6\"\n          onClick={exportGLTF}\n        >\n          Export GLTF\n        </button>\n\n        <button\n          style={{ margin: \"0 auto\" }}\n          className=\"waves-effect waves-light btn-large indigo accent-4 col m12 l6\"\n          onClick={exportGLB}\n        >\n          Export GLB\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default Export;\n","import React from \"react\";\n\nconst Preloader = ({ loading }) =>\n  loading && (\n    <div className=\"preloader-box\">\n      <div className=\"preloader-wrapper big active\">\n        <div className=\"spinner-layer spinner-blue-only\">\n          <div className=\"circle-clipper left\">\n            <div className=\"circle\"></div>\n          </div>\n          <div className=\"gap-patch\">\n            <div className=\"circle\"></div>\n          </div>\n          <div className=\"circle-clipper right\">\n            <div className=\"circle\"></div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n\nexport default Preloader;\n","import React, { useState, useContext } from \"react\";\nimport Layout from \"../components/Layout\";\nimport UploadSection from \"../components/UploadSection\";\nimport ModelViewer from \"../components/ModelViewer\";\nimport AnimationList from \"../components/AnimationList\";\nimport loadModel from \"../helpers/loadModel\";\nimport { Context as ModalContext } from \"../context/ModelContext\";\nimport Export from \"../components/Export\";\nimport Preloader from \"../components/Preloader\";\n\nconst Home = () => {\n  const [model, setModel] = useState(\"default.gltf\");\n  const [fileExt, setFileExt] = useState(\"gltf\");\n  const {\n    state: { loading },\n    addAnimations,\n  } = useContext(ModalContext);\n\n  const onMainModelUpload = (event) => {\n    if (event.target.files[0]) {\n      const file = event.target.files[0];\n      let fileUrl = URL.createObjectURL(file);\n      setFileExt(file.name.split(\".\").pop());\n\n      console.log(fileUrl);\n\n      setModel(fileUrl);\n    }\n  };\n\n  const onAnimationUpload = (event) => {\n    if (event.target.files.length) {\n      Array.from(event.target.files).forEach((element) => {\n        let fileUrl = URL.createObjectURL(element);\n        let fileExt = element.name.split(\".\").pop();\n        loadModel(fileUrl, fileExt, (object) => {\n          let fileName = element.name.split(\".\")[0].replace(/\\s/g, \"\");\n          fileName = fileName.charAt(0).toUpperCase() + fileName.slice(1);\n          if (object.animations.length > 1) {\n            object.animations.forEach((anim, index) => {\n              anim.name = fileName + index;\n            });\n          } else {\n            if (object.animations[0].name === \"Take 001\") {\n              object.animations[0].name = \"T-Pose (No Animation)\";\n            } else {\n              object.animations[0].name = fileName;\n            }\n          }\n          addAnimations(object.animations);\n        });\n      });\n    }\n  };\n\n  return (\n    <Layout>\n      <div className=\"row\" style={{ height: \"91vh\" }}>\n        <div className=\"col m3\">\n          <UploadSection\n            onMainModelUpload={onMainModelUpload}\n            onAnimationUpload={onAnimationUpload}\n          />\n          <Export />\n        </div>\n        <div className=\"col m6\">\n          <ModelViewer model={model} fileExt={fileExt} />\n        </div>\n        <div className=\"col m3\">\n          <AnimationList />\n        </div>\n      </div>\n      <Preloader loading={loading} />\n    </Layout>\n  );\n};\n\nexport default Home;\n","import React from \"react\";\nimport Home from \"./pages/Home\";\nimport { Provider as ModelProvider } from \"./context/ModelContext\";\n\nconst App = () => {\n  return (\n    <ModelProvider>\n      <Home />\n    </ModelProvider>\n  );\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport \"materialize-css/dist/css/materialize.css\";\nimport \"materialize-css\";\nimport \"./index.css\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}